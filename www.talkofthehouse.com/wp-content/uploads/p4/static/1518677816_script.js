(function(){(function(){if(typeof window.console=="undefined"){var e=function(){};window.console={log:e,error:e,trace:e,dir:e,warning:e}}})();window.PROPHOTO=window.PROPHOTO||{};PROPHOTO.AMD={};PROPHOTO.site={URL:"http://www.talkofthehouse.com",wpURL:"http://www.talkofthehouse.com",wpUploadURL:"http://www.talkofthehouse.com/wp-content/uploads",themeURL:"http://www.talkofthehouse.com/wp-content/themes/prophoto4",ajaxURL:"http://www.talkofthehouse.com/wp-admin/admin-ajax.php",renderingMobile:false,isDev:false};PROPHOTO.browser={isTech:navigator.userAgent.indexOf("(prophototech)")!==-1,isTouchDevice:!!("ontouchstart"in window||navigator.msMaxTouchPoints)};PROPHOTO.requireCacheBuster=PROPHOTO.site.isDev?(new Date()).getTime():1528;var imgDir=PROPHOTO.site.imgDir='http://www.talkofthehouse.com/wp-content/uploads/p4/images/';(function(){var e=window.PROPHOTO=window.PROPHOTO||{},i=jQuery,n,t,u;n=function(e){return("https:"==document.location.protocol?"https:":"http:")+e.replace(/^http(s)?:/,"")};t=function(n){var t=[],r=true,f=e.AMD.modules;if(n.length===0){return[]}i.each(n,function(n,o){if(o in f){t.push(f[o])}else{if(i.inArray(o,f.waiting)===-1&&i.inArray(o,f.defining)===-1){i.ajax({url:u+o+".js?_="+e.requireCacheBuster,dataType:"script",cache:true});f.waiting.push(o)}r=false}});return r?t:false};u=n(e.site.themeURL+"/js/");e.AMD=e.AMD||{};e.AMD.modules={waiting:[],defining:[]};e.define=function(n,u,r){var f=t(u),o;if(i.inArray(n,e.AMD.modules.defining)===-1){e.AMD.modules.defining.push(n)}if(arguments.length!==3){return}if(f){if(typeof r==="function"){o=r.apply(null,f);if(typeof o==="undefined"){o="loaded"}}else if(typeof r==="object"){o=r}e.AMD.modules[n]=o}else{setTimeout(function(){e.define(n,u,r)},100)}};e.require=function(i,n){var u=t(i);if(u){if(typeof n==="function"){n.apply(null,u)}}else{setTimeout(function(){e.require(i,n)},100)}};if(e.site&&e.site.isDev){window.require=e.require;window.define=e.define}})();PROPHOTO.define("jquery",[],function(){return jQuery;});PROPHOTO.define("util",["jquery"],function(e){return Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),e.fn.toInt=function(t){t=t||"text";var n=parseInt(e(this)[t](),10);return isNaN(n)?0:n},{intVal:function(e,t){var n=typeof e,r;return n==="boolean"?+e:n==="string"?(r=parseInt(e,t||10),isNaN(r)||!isFinite(r)?0:r):n==="number"&&isFinite(e)?e|0:0},round:function(e,t){var n;if(typeof t=="undefined"||!t)t=0;return n=Math.pow(10,t),Math.round(e*n)/n},objectCreate:function(e){function t(){}return t.prototype=e,new t},initObjectsWithWrap:function(t,n,r){t.each(function(t,i){var s=this.objectCreate(n);s[r||"wrap"]=e(i),s.init()}.bind(this))},initFormValidation:function(e){PROPHOTO.require(["form-validator"],function(t){var n=this.objectCreate(t);n.form=e,n.init()}.bind(this))},cssLoaded:function(){var t=e("body").css("border-left-color");return t==="rgb(255, 0, 0)"||t==="#ff0000"},scrollToBelowHeader:function(t){var n=e("header.sc:first"),r=n.height()+n.offset().top;e("html,body").animate({scrollTop:r+"px"},450,function(){this.nodeName==="HTML"&&typeof t=="function"&&t()})},GET:function(e,t){var n=(t||window.location.href).match(new RegExp("(?:\\?|&)"+e+"=([^&#]+)"));return n&&n[1]?n[1]:!1}}});PROPHOTO.define("plugins/easing",["jquery"],function(e){return e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n}}),"easing"});PROPHOTO.define("plugins/image-loaded",["jquery"],function(e){e.fn.imageLoaded=function(e){var t=this.filter("img"),n=t.length;return t.bind("load error",function(){e.call(this)}).each(function(){if(this.complete||this.complete===undefined||this.complete===!1&&navigator.appVersion.indexOf("MSIE 9")!==-1){var e=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=e}}),this}});PROPHOTO.define("grids-overlay",["jquery"],function(e){var t,n=navigator.userAgent.indexOf("Android 4.2.")!==-1;return e(document).ready(function(e){t=e("body")}),e(window).on({scrollstart:function(){t.addClass("scrolling")},scrollstop:function(){setTimeout(t.removeClass.bind(t,"scrolling"),100)}}),function(r){r.find(".grid-style-img_rollover_text .grid-item").on({click:function(t){var r=e(this).find(".grid-overlay"),i=r.find("a:first"),s=i.attr("href");if(n&&r.hasClass("mouseentered"))return!1;if(i.hasClass("popup-slideshow"))return i.trigger("click"),!1;if(s==="#contact-form")return e("body").trigger("show_contact_form"),!1;if(i.attr("target")==="_blank")return window.open(s),!1;window.location.href=s},mouseenter:function(t){var r=e(this).find(".grid-overlay");r.addClass("overlay-shown").fadeIn(200),n&&(r.addClass("mouseentered"),setTimeout(function(){r.removeClass("mouseentered")},1e3))},mouseleave:function(){e(this).find(".grid-overlay").removeClass("overlay-shown").fadeOut("fast")},touchend:function(n){var r=e(this),i=r.find(".grid-overlay");return t.hasClass("scrolling")?!1:n.target.nodeName==="A"?!0:i.hasClass("overlay-shown")?!0:(r.trigger("mouseenter"),setTimeout(r.trigger.bind(r,"mouseleave"),4e3),!1)}})}});PROPHOTO.define("grids-masonry",["jquery"],function(e){var t={},n=function(r){r.find(".grid-format-masonry").each(function(){var i=e(this),s=i.attr("id"),o=i.attr("class").match(/grid-style-([a-z_]+)/).pop(),u=parseInt(i.attr("data-column-count"),10),a=parseInt(i.attr("data-column-width"),10),f=parseInt(i.attr("data-gutter-width"),10),l=[],c;for(var h=0;h<u;h++)l.push(0);e(".grid-item",this).each(function(){var t=e(this),n=Math.min.apply(Math,l),r=e.inArray(n,l),i=r*(a+f),s;t.css({position:"absolute",left:i+"px",top:n+"px"});if(o==="img_rollover_text")s=parseInt(t.attr("data-item-height"),10);else{var u=t.find("img.grid-img"),h=t.find(".text-below"),p=t.hasClass("using-fallback-img")?0:parseInt(u.attr("height"),10);c||(c=parseInt(t.find(".img-above").css("margin-top"),0)+parseInt(u.css("margin-top"),10)+parseInt(u.css("border-top-width"),10)+parseInt(u.css("border-bottom-width"),10)+parseInt(h.css("margin-top"),10)+parseInt(h.css("margin-bottom"),10)),s=p+parseInt(h.outerHeight(),10)+c}l[r]=n+s+f}),i.css("height",Math.max.apply(Math,l)+"px"),s in t?t[s]++:t[s]=1,t[s]<=5&&setTimeout(function(){n(r)},500)})};return n});PROPHOTO.define("element-throbber",["jquery"],function(e){return{start:function(e){var t=!1;e.addClass("throbbing").fadeTo(350,.001).attr("data-throb-interval",setInterval(function(){e.fadeTo(350,t?.001:1),t=!t},350))},stop:function(e){clearInterval(parseInt(e.attr("data-throb-interval"),10)),e.removeClass("throbbing").removeAttr("data-throb-interval").fadeTo(350,1)}}});PROPHOTO.define("contact-form",["jquery","util","element-throbber"],function(e,t,n){var r=function(r,s){r.find("#contactform").length?(r.find("form").hasClass("validation-initialized")||t.initFormValidation(r.find("form#contactform")),r.is(":visible")?r.slideUp(500):i(r)):(s&&n.start(s),e.ajax({type:"POST",url:PROPHOTO.site.ajaxURL,data:{action:"pp_nopriv",contact_form:"render",ajax:"1"},success:function(n){r.html(n).find("#referpage").val(window.location.href.replace(/#.+/,"")),e("body").trigger("new_page_content_added",[r]),t.initFormValidation(r.find("form#contactform")),i(r)},complete:function(){s&&n.stop(s)}}))},i=function(e){t.scrollToBelowHeader(function(){e.slideToggle(500,function(){e.is(":visible")&&e.find("#lastname").trigger("focus")})})};return{handleHash:function(t){if(t==="#success"){var n=e("#pp-contact-success-msg");n.html("<p>"+n.attr("data-msg")+"</p>").show().delay(3500).slideUp()}else if(t==="#error"){var i=e("#pp-contact-error-msg");i.html("<p>"+i.attr("data-msg")+"</p>").show(),setTimeout(function(){r(this.formWrap)}.bind(this),3500)}else t==="#contact-form"&&r(this.formWrap)},bindClickEvents:function(){e(document).on("click","a.show-hidden-contact_form,a[href$='#contact-form']",function(t){return r(this.formWrap,e(t.target)),!1}.bind(this))}}});PROPHOTO.define("unobfuscate-emails",["jquery"],function(e){var t=function(e){var t=e.split(","),n="";for(var r=0;r<=t.length;r++)t[r]&&(n+=String.fromCharCode(t[r]));return n};return function(n){n.find(".jsobf").each(function(){var n=e(this),r=n.parents("a"),i=n.hasClass("img")?n.html():t(n.text());r.attr("href",t(r.attr("href"))),r.html(i)})}});PROPHOTO.define("plugins/lazyloader",["jquery"],function(e){e.fn.lazyload=function(){var t=2250,n=this,r={},i=e("body").hasClass("cant-fade-imgs-with-black"),s=function(e){return i?e.show():e.css("opacity",0).animate({opacity:1},300)};return e(window).bind("scroll",function(i){var s=e(window).scrollTop(),o=s+e(window).height()+t;for(var u in r)if(u<=o){for(var a in r[u])a=r[u][a],e(a).addClass("lazyload-loading").trigger("appear");r[u]=[]}var f=e.grep(n,function(e){return!e.loaded});n=e(f)}),this.each(function(){var t=this;t.loaded=!1,e(t).one("appear",function(){this.loaded||e("<img />").bind("load",function(){e(t).attr("src",e(t).attr("data-lazyload-src")).removeClass("lazyload-loading"),s(e(t)),t.loaded=!0}).attr("src",e(t).attr("data-lazyload-src"))})}),n.each(function(){var t=e(this).offset().top;r[t]===undefined&&(r[t]=[]),r[t].push(this)}),e(window).trigger("scroll"),this}});PROPHOTO.define("drawers",["jquery","util"],function(e,t){var n={},r=function(){if(!t.cssLoaded())return setTimeout(r,200);var i=10*2,s=e(".drawer"),o=s.find(".drawer_content");o.css("height",e(window).height()-i+"px"),s.each(function(){var t=e(this),r=t.attr("id"),s=t.find(".tab"),o=parseInt(t.find(".drawer_content").css("width"),10)+i,u=parseInt(o*.75,10);s.on("mouseover",function(){t.css("z-index","181").animate({left:"0px"},u,"swing").addClass("open")}),PROPHOTO.browser.isTouchDevice&&(e("#inner-wrap").off("touchstart").on("touchstart",function(){t.trigger("mouseleave")}),s.on("touchstart",function(){return t.hasClass("open")?t.trigger("mouseleave"):s.trigger("mouseover"),!1})),t.on({mouseleave:function(){var e=PROPHOTO.browser.isTouchDevice?1:1e3;clearTimeout(n[r]),n[r]=setTimeout(function(){t.animate({left:"-"+o+"px"},u,"swing",function(){t.css("z-index","180").removeClass("open")})},e)},mouseenter:function(){clearTimeout(n[r])}})})};return r});PROPHOTO.define("nav-menu-util",["jquery"],function(e){var t=function(e,t){e.find("li ul").css({opacity:t}).find("ul").css({opacity:1})},n=function(){return navigator.userAgent.match(/MSIE (6|7|8)\.0/i)!==null},r=e("body");return{modifyFormat:function(){e(".suckerfish li ul a").removeAttr("title"),e(".suckerfish li ul li:has(ul)").each(function(){var t=e(this).children("a");t.html(t.html()+" &raquo;")}),e(".suckerfish li ul li ul").hover(function(){e(this).parent().children("a").css("text-decoration","underline")},function(){e(this).parent().children("a").css("text-decoration","none")})},setDropdownOpacities:function(){n()||(this.primaryNavDropdownOpacity<100&&t(e("#primary-nav"),this.primaryNavDropdownOpacity),this.secondaryNavDropdownOpacity<100&&t(e("#secondary-nav"),this.secondaryNavDropdownOpacity))},handleSuckerfishTouch:function(){var t=!1,n=e(".suckerfish li");navigator.userAgent.indexOf("Trident")!==-1&&e(".suckerfish li.has-children > a[href='#']").each(function(){e(this).attr("href","javascript: return false")}),n.on("touchstart MSPointerDown pointerdown",function(i){var s=e(this);return i.type!=="touchstart"&&i.originalEvent&&i.originalEvent.pointerType!=="touch"?!0:(clearTimeout(t),n.not(s.parents()).removeClass("sfhover"),s.addClass("sfhover"),t=setTimeout(function(){n.removeClass("sfhover"),r.focus()},6e3),e(i.target).parent().hasClass("has-children")?(i.stopPropagation(),!1):(i.stopPropagation(),!0))}),e(document).on("touchstart",function(){n.filter(".sfhover").length&&n.removeClass("sfhover")})}}});PROPHOTO.define("comments-util",["jquery","util"],function(e,t){return{handleErrorHash:function(t){if(t.indexOf("#addcomment-error-")===0){var n=e("form#add-comment"),r=n.find("textarea"),i=n.find("#addcomment-error");r.val(decodeURIComponent(t.replace("#addcomment-error-","").replace(/%0A/g,"\n"))),i.show().find("span").text(i.attr("data-msg")),e("html,body").animate({scrollTop:n.offset().top+"px"},500,function(){r.focus()})}}}});PROPHOTO.define("facebook",["jquery"],function(e){var t={parse:function(n){n.length!==1&&(n=e("body"));if(typeof window.fbAsyncInit=="undefined")window.fbAsyncInit=function(){FB.init({logging:!1,xfbml:!0,status:!1}),FB.Event.subscribe("comment.create",function(e){t.newCommentAdded(e)})};else try{FB.XFBML.parse(n[0])}catch(r){}e("#fb-root").length||e("body").append('<div id="fb-root"></div>'),e("#facebook-jssdk").length||function(e){var t,n="facebook-jssdk",r=e.getElementsByTagName("script")[0];t=e.createElement("script"),t.id=n,t.async=!0,t.src="//connect.facebook.net/"+PROPHOTO.fb_lang+"/all.js",r.parentNode.insertBefore(t,r)}(document)},newCommentAdded:function(n){var r;try{r=parseInt(e("div[data-href='"+n.href+"']").parents("article").attr("id").replace("article-",""),10)}catch(i){}r&&e.ajax({type:"POST",url:PROPHOTO.site.ajaxURL,data:{action:"pp_nopriv",articleID:r,permalink:n.href,fb_comment_added:1},success:function(e){e.indexOf("No FB comments could be found for")!==-1&&setTimeout(function(){t.newCommentAdded(n)},3e3)}})}};return t});PROPHOTO.require(["jquery","util","grids-overlay","grids-masonry","contact-form","unobfuscate-emails","drawers","nav-menu-util","comments-util","facebook"],function($,a,b,c,d,e,f,g,h,i){$(document).ready(function(){var body=$("body");var onNewContent=function(callback){body.on("new_page_content_added",function(e,newContent){callback(newContent);});};b(body);onNewContent(b);c(body);onNewContent(c);var initLightboxGalleries=function(context){var lightboxGalleries=context.find(".pp-lightbox.not-loaded");if(lightboxGalleries.length){PROPHOTO.require(["plugins/lightbox"],function(){lightboxGalleries.each(function(){var gallery=$(this);gallery.find("a[data-dims]").prophotoLightbox({img_blank:PROPHOTO.site.themeURL+"/images/blank.gif",img_loading:'http://www.talkofthehouse.com/wp-content/uploads/p4/images/ajax-loading-bar.gif',img_btn_prev:'http://www.talkofthehouse.com/wp-content/uploads/p4/images/lightbox-btn-prev.gif',img_btn_next:'http://www.talkofthehouse.com/wp-content/uploads/p4/images/lightbox-btn-next.gif',img_btn_close:'http://www.talkofthehouse.com/wp-content/uploads/p4/images/lightbox-btn-close.png',img_fadespeed:400,border_width:10,resize_speed:400,fixed_navigation:false,btns_opacity:0.65,btn_fadespeed:200,overlay_color:'#000000',overlay_opacity:0.8,max_overlay_size:900,translate_image:"Image",translate_of:"of"},gallery.attr("id"));gallery.find(".pp-lightbox-thumbs a").css("opacity",0.65).hover(function(){$(this).stop().animate({opacity:1},200);},function(){$(this).stop().animate({opacity:0.65},200);});gallery.removeClass(".not-loaded");});});}};initLightboxGalleries(body);onNewContent(initLightboxGalleries);body.on("pagebeforeshow",initLightboxGalleries.bind({},body));var contactForm=a.objectCreate(d);contactForm.formWrap=$("#contact-form");contactForm.handleHash(window.location.hash);contactForm.bindClickEvents();body.on("show_contact_form",function(){contactForm.handleHash("#contact-form");});e(body);onNewContent(e);var initGallerySlideshows=function(){var slideshows=$(".pp-slideshow-gallery.not-loaded");if(slideshows.length){PROPHOTO.require(["slideshow"]);PROPHOTO.require(["slideshow-gallery"],function(slideshowGalleryProto){slideshows.each(function(){var wrap=$(this),startImg=wrap.find("img.ss-first-img");startImg.imageLoaded(function(){var slideshow=a.objectCreate(slideshowGalleryProto);slideshow.wrap=wrap;slideshow.startImg=startImg;slideshow.conf=$.extend({},{"thumbPadding":10,"thumbOpacity":0.75,"activeThumbOpacity":1,"startPlaying":true,"controlsOverlaid":true,"controlsAutoHide":true,"controlsAutoHideTime":1800,"holdTime":1700,"transitionTime":1000,"loopImages":false,"transitionType":"fade","thumbsPagingAnimation":{"easing":"swing","speed":900}},$.parseJSON(slideshow.wrap.find("script").html()));slideshow.init();});});});}};initGallerySlideshows(body);onNewContent(initGallerySlideshows);body.on("pagebeforeshow",initGallerySlideshows.bind({},body));var bindSlideshowPopupClicks=function(context){context.find("a.popup-slideshow").on("click",function(){var clicked=$(this),width,height,params,dims,offset,href;if(PROPHOTO.browser.isTouchDevice){href=clicked.attr("href");if(body.hasClass("ipad")){window.location.href=href+"&fullscreen=1";}else{window.location.href=href.replace("slideshow_popup=1","gallery_page=slideshow");}}else{if(clicked.hasClass("fullscreen")){width=screen.availWidth;height=screen.availHeight;}else{dims=clicked.attr("rel").split("x");width=dims[0];height=dims[1];offset=",left=20,screenX=20,top=20,screenY=20";}
params="location=0,menubar=0,height="+height+",width="+width+",toolbar=0,scrollbars=0,status=0,resizable=0"+offset;window.open(clicked.attr("href"),"PopupWindow",params);}
return false;});};bindSlideshowPopupClicks(body);onNewContent(bindSlideshowPopupClicks);body.on("pagebeforeshow",bindSlideshowPopupClicks.bind({},body));var initSlideshowMusicPlayers=function(context){var slideshowsWithMusic=context.find(".pp-slideshow-gallery").has(".mp3player.not-initialized");if(slideshowsWithMusic.length){PROPHOTO.require(["music-player"],function(musicPlayerProto){slideshowsWithMusic.each(function(){var musicPlayer=a.objectCreate(musicPlayerProto);musicPlayer.slideshow=$(this);musicPlayer.conf={"loop":false,"autoStart":true};musicPlayer.init();});});}};initSlideshowMusicPlayers(body);onNewContent(initSlideshowMusicPlayers);body.on("pagebeforeshow",initSlideshowMusicPlayers.bind({},body));if(!body.hasClass("mobile")){$(".article-content img[data-lazyload-src]").lazyload();}
f();g.primaryNavDropdownOpacity=1;g.secondaryNavDropdownOpacity=0.93;g.setDropdownOpacities();g.modifyFormat();if(PROPHOTO.browser.isTouchDevice){g.handleSuckerfishTouch();}
if(body.hasClass("single")){var form=$("form#add-comment");if(form.length){form.find("input,textarea").on("focus",function(){a.initFormValidation(form);});}}
if(!body.hasClass("single")&&$(".article-comments").length){PROPHOTO.require(["ajax-comments"],function(ajaxCommentsHandlerProto){a.initObjectsWithWrap($("article"),ajaxCommentsHandlerProto,"article");});body.on("add_comment_form_loaded",function(event,form){a.initFormValidation(form);});}else{h.handleErrorHash(window.location.hash);}
$(".comments-count").on("click",function(){var commentsSection=$(this).parents(".article-comments");if(commentsSection.find(".comments-body-inner div").length){commentsSection.toggleClass("comments-shown");commentsSection.find(".comments-body").slideToggle(400);}});PROPHOTO.fb_lang='en_US';i.parse(body);onNewContent(i.parse.bind(i));body.on("pagebeforeshow",i.parse.bind(i));$("article:last").addClass("last-post");$(document).on("click","a[href='#top']",function(){$("html,body").animate({scrollTop:0},500,"easeOutExpo");return false;});$("a.type-share_on_facebook,a.type-tweet_this_url,a.type-subscribe_by_email").on("click",function(){var clicked=$(this),height=clicked.hasClass("type-subscribe_by_email")?550:275,width=clicked.hasClass("type-share_on_facebook")?665:600,href=clicked.attr("href");window.open(href,href,'location=0,menubar=0,height='+height+',width='+width+',toolbar=0,scrollbars=0,status=0');return false;});});});}());